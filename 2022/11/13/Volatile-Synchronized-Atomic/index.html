<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content>
    <meta name="keyword" content>
    <link rel="shortcut icon" href="/img/ironman-draw.png">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <title>
        
          Volatile-Synchronized-Atomic - Paak&#39;s Blog
        
    </title>

    <link rel="canonical" href="https://bgpark82.github.io/2022/11/13/Volatile-Synchronized-Atomic/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS --> 
    <link rel="stylesheet" href="/css/beantech.min.css">
    
    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/css/highlight.css">

    <link rel="stylesheet" href="/css/widget.css">

    <link rel="stylesheet" href="/css/rocket.css">

    <link rel="stylesheet" href="/css/signature.css">

    <link rel="stylesheet" href="/css/toc.css">

    <!-- Custom Fonts -->
    <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- Hux Delete, sad but pending in China
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/
    css'>
    -->


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">
	<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        
            background-image: url('null')
            /*post*/
        
    }
    
    #signature{
        background-image: url('/img/signature/BeanTechSign-white.png');
    }
    
</style>

<header class="intro-header" >
    <!-- Signature -->
    <div id="signature">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                
                    <div class="post-heading">
                        <div class="tags">
                            
                        </div>
                        <h1>Volatile-Synchronized-Atomic</h1>
                        <h2 class="subheading"></h2>
                        <span class="meta">
                            Posted by bgpark on
                            2022-11-13
                        </span>
                    </div>
                


                </div>
            </div>
        </div>
    </div>
</header>

	
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Paak&#39;s Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>

                    

                        
                    

                        
                        <li>
                            <a href="/archive/">Archives</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/tags/">Tags</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        
                    
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    <!-- Modify by Yu-Hsuan Yen -->

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <h2><span id="volatile">volatile</span></h2>
<p>Volatile은 <strong>모든 Thread가 CPU의 Cache 영역의 데이터가 아닌 메인 메모리에서 최신 데이터를 참조</strong>하도록 한다. 즉, 동일한 시점에서 모든 스레드가 동일한 값을 참조하도록 동기화 한다 (메모리 동기화 라고도 부른다). <strong>Locking 메커니즘은 사용되지 않아 모든 Thread가 volatile 변수에 접근 가능</strong>하다</p>
<p>volatile은 Thread의 <strong>메모리 가시성 문제를 해결</strong>할 수 있다</p>
<p><img src="https://raw.githubusercontent.com/bgpark82/image/master/images/image-20220424140812644.png" alt="image-20220424140812644"></p>
<p>각 Thread는 각각의 CPU에서 연산을 하고 CPU의 Cache 영역에 변수를 저장한다. Cache의 데이터를 메인 메모리에 반영하여 데이터를 동기화 처리를 한다. 하지만 메인 메모리에 반영되지 않으면 다른 Thread는 예전 데이터를 메인 메모리에서 참조하여 사용하게 된다. 메모리 가시성은 <strong>Thread 쓰기 작업이 메인 메모리에 반영되지 않아 다른 Thread가 상태변경을 볼 수 없는 상황</strong>을 말한다. volatile은 메인 메모리에 쓰기 작업을 바로하여 <strong>CPU의 Cache 영역이 아닌 메인 메모리에 바로 상태 변경</strong>을 한다</p>
<blockquote>
<p>CPU Cache를 바로 flush하는 방식인가?</p>
</blockquote>
<blockquote>
<p>또한 volatile은 <strong>compiler나 JVM이 코드의 재정렬을 막는다</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> <span class="keyword">boolean</span> stop = <span class="keyword">false</span>; <span class="comment">// volatile variable로 선언</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    ExecutorService executorService = Executors.newFixedThreadPool(<span class="number">10</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">      executorService.submit(() -&gt; &#123;</span><br><span class="line">        <span class="keyword">while</span> (!stop) &#123;    &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">    stop = <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>volatile은 <strong>하나의 Thread가 쓰기 연산을 하고 다른 하나의 Thread가 읽기 연산을 할 때만 가능</strong>하다. boolean 타입의 stop이라는 변수를 <code>volatile</code>로 선언하고 메인 메모리에 false가 저장된다. stop이라는 공유 자원을 10개의 작업을 통해 stop이 true가 될때까지 실행하는 코드이다. 오직 main Thread만이 stop을 true로 변경하면 메인 메모리의 true가 반영되고 모든 Thread들이 메인 메모리를 참조하여 while 문을 빠져나오게 된다</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> <span class="keyword">boolean</span> stop = <span class="keyword">false</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> <span class="keyword">int</span> count = <span class="number">50</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    ExecutorService executorService = Executors.newFixedThreadPool(<span class="number">50</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">50</span>; i++) &#123;</span><br><span class="line">      executorService.submit(() -&gt; &#123;</span><br><span class="line">        <span class="keyword">while</span> (!stop) &#123;&#125;</span><br><span class="line">        System.out.println(<span class="string">"count="</span> + --count);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">    stop = <span class="keyword">true</span>;</span><br><span class="line">    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">    assertThat(count).isEqualTo(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>이번에는 while문을 빠져나오는 순간 count라는 공유 변수를 각 Thread들이 내부에서 변경하는 코드이다. 즉, count는 여러 Thread가 동시에 값을 변경 시키려 할 것이다. 50개의 Thread가 각각 50의 값을 1씩 감소시키면 결과는 0으로 기대가 된다</p>
<p><img src="https://raw.githubusercontent.com/bgpark82/image/master/images/image-20220425001651162.png" alt="image-20220425001651162"></p>
<p>하지만 <strong>1을 반환한다</strong>. <strong>대부분의 경우는 0이 반환되지만 Multi Thread가 쓰기 작업을 하면 Race Condition으로 다른 값을 반환할 수도 있다</strong>. 이때는  <code>volatile</code> 이외에 다른 처리를 해야한다</p>
<h2><span id="synchronized-blocking-critical-section">synchronized (Blocking, Critical Section)</span></h2>
<p>Race Condition을 제거하기 위해 <code>synchronized</code> 블록을 사용할 수 있다. synchronized는 블록 혹은 메소드 레벨에서 하나의 Thread만 Critical Section에서 Lock을 획득하도록 보장한다. 오직 <strong>Lock을 획득한 Thread만 Critical Section에 들어갈 수 있고 다른 Thread는 대기</strong>하여야 한다. 이처럼 synchronized는 <strong>Lock을 이용한 Blocking 방식</strong>으로 사용한다</p>
<p><img src="https://raw.githubusercontent.com/bgpark82/image/master/images/image-20220424222524965.png" alt="image-20220424222524965"></p>
<p>하지만, Blocking Thread는 매우 비싸다. 하나의 Thread가 Lock을 획득하는 순간 다른 모든 Thread들이 기다려야 한다. Thread가 작업을 끝내고 Lock을 반환해도 다른 Thread들이 바로 자원을 획득할 수 없다. 왜냐하면 <strong>Thread의 상태를 변경하는 것은 OS의 스케쥴러가 결정</strong>하기 때문이다</p>
<h2><span id="atomic-non-blocking">Atomic (Non Blocking)</span></h2>
<p>Atomic은 <strong>더이상 쪼개질 수 없는 성질</strong>을 뜻한다. Atomic 연산은 <strong>더 이상 쪼개질 수 없는 연산</strong>을 뜻한다. <strong>멀티 스레드에서 Atomic 하지 않은 연산은 동시성 문제</strong>를 일으킨다</p>
<p><img src="https://raw.githubusercontent.com/bgpark82/image/master/images/image-20220425230938506.png" alt="image-20220425230938506"></p>
<p>예를들어 단항 연산 <code>i++</code>는 보기에는 1을 증가시키는 역할만하는 Atomic 연산이지만 기계어로 번역되었을 때는 그렇지 않다. <code>i</code>를 메인 메모리로 부터 읽어 CPU Cache에 옮기고 Cache에서 1을 더한 뒤 Cache의 값을 메모리에 반영한다. 이때, Race Condition이 발생되면 Cache에서 메인 메모리로 반영되지 않은 값을 다른 스레드들이 참조하게 된다. 즉, <strong>자바코드가 기계어로 번역되면서 Atomic하지 않은 코드가 생성되어 스레드가 동일한 값을 참조하지 못하게 된다</strong></p>
<h2><span id="cas-알고리즘">CAS 알고리즘</span></h2>
<p>멀티 스레드 환경에서 Race Condition을 피하기 위해서는 Atomic한 방법을 사용할 수 있다. Atomic의 핵심은 <strong>CAS(Compare and Swap) 알고리즘</strong>이다. CAS는 <strong>기대값과 실제값이 일치할 때까지 Compare과정을 반복하고 일치하면 Swap하는 알고리즘</strong>이다. volatile이 메모리의 가시성 문제를 해결하면서 모든 Thread들이 메인 메모리에서 최신의 데이터를 CAS로 일치할 수 있다. 그래서 Race Condition에서도 Thread가 Blocking 되어 OS의 스케쥴러를 사용하는게 아닌 <strong>CPU 연산으로 Compare 과정을 통해 모든 Thread가 데이터를 체크</strong>한다</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">int</span> value;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">incrementAndGet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	  <span class="keyword">return</span> unsafe.getAndAddInt(<span class="keyword">this</span>, valueOffset, <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">getAndAddInt</span><span class="params">(Object o, <span class="keyword">long</span> offset, <span class="keyword">int</span> delta)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> v;</span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">      v = getIntVolatile(o, offset); 												<span class="comment">// 1. 메인 메모리 값</span></span><br><span class="line">    &#125; <span class="keyword">while</span> (!compareAndSwapInt(o, offset, v, v + delta));  <span class="comment">// 2. 실패하면 계속 반복</span></span><br><span class="line">    <span class="keyword">return</span> v;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>AtomicInteger의 <code>incrementAndGet()</code> 메소드를 보면 CAS 알고리즘을 사용하는 것을 확인할 수 있다. <code>getIntVolatile()</code> 은 메인 메모리의 값을 반환한다. 이후 <code>compareAndSwapInt()</code>로 메인 메모리의 값과 객체의 값을 비교하여 동일하면 Swap하고 다르면 같을 때까지 계속 loop를 돌게된다</p>
<p>예를들어 Thread A가 계산을 하고 메인 메모리에 반영하기 직전에 Thread B가 계산을 하여 메인 메모리에 반영한 경우이다. 이때, Thread A가 변경값을 메모리에 반영하면 Thread B의 기대값이 달라져 버린다. 그래서 false를 반환하면 무한 루프에서 다른 Thread에 의해 변경된 메모리 값을 읽고 같은 시도를 반복한다</p>
<blockquote>
<p>단 하나의 스레드만 변경을 어떻게 하는거지?</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> AtomicInteger atomicCount = <span class="keyword">new</span> AtomicInteger(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">integer</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">  ExecutorService executorService = Executors.newFixedThreadPool(<span class="number">10</span>);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">    executorService.submit(() -&gt; &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">1000</span>; j++) &#123;</span><br><span class="line">        count++;</span><br><span class="line">        atomicCount.incrementAndGet();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">  System.out.println(<span class="string">"atomic 결과 : "</span> + atomicCount.get());</span><br><span class="line">  System.out.println(<span class="string">"int 결과 : "</span> + count);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/bgpark82/image/master/images/image-20220424233022391.png" alt="image-20220424233022391"></p>
<p><img src="https://raw.githubusercontent.com/bgpark82/image/master/images/image-20220424222907008.png" alt="image-20220424222907008"></p>
<p>CAS는 <strong>Lock 기반의 멀티 스레딩 방식보다 훨씬 빠르다</strong>. <code>synchronized</code>는 하나의 스레드가 Lock을 획득하여 연산하는 동안 다른 스레드들은 대기해야 한다. 또한 연산을 마친 스레드가 Lock을 해제하더라도 <strong>OS의 스케줄러에 의해 스레드들이 Lock을 획득하기 때문에 언제 획득할지 모른다</strong>.</p>
<p>반면 CAS는 <strong>모든 스레드가 메인 메모리의 데이터와 기대값이 일치할 때까지 loop를 돌게 된다</strong>. 기대값과 일치하면 모든 스레드가 한번에 데이터를 변경할 수 있어 <strong>Lock 기반보다 더 빠르다</strong>.</p>
<h2><span id="참조">참조</span></h2>
<p><a href="https://stackoverflow.com/questions/3519664/difference-between-volatile-and-synchronized-in-java#:~:text=Marking%20a%20variable%20as%20volatile,when%20they%20exit%20the%20block" target="_blank" rel="noopener">https://stackoverflow.com/questions/3519664/difference-between-volatile-and-synchronized-in-java#:~:text=Marking a variable as volatile,when they exit the block</a>.</p>
<p><a href="https://stackoverflow.com/questions/9749746/what-is-the-difference-between-atomic-volatile-synchronized" target="_blank" rel="noopener">https://stackoverflow.com/questions/9749746/what-is-the-difference-between-atomic-volatile-synchronized</a></p>
<p><a href="https://javarevisited.blogspot.com/2011/06/volatile-keyword-java-example-tutorial.html#axzz7RLhJEZ00" target="_blank" rel="noopener">https://javarevisited.blogspot.com/2011/06/volatile-keyword-java-example-tutorial.html#axzz7RLhJEZ00</a></p>
<p><a href="https://jronin.tistory.com/110" target="_blank" rel="noopener">https://jronin.tistory.com/110</a></p>
<p><a href="https://steady-coding.tistory.com/568" target="_blank" rel="noopener">https://steady-coding.tistory.com/568</a></p>
<p><a href="http://www.cs.umd.edu/~pugh/java/memoryModel/jsr-133-faq.html" target="_blank" rel="noopener">http://www.cs.umd.edu/~pugh/java/memoryModel/jsr-133-faq.html</a></p>
<p><a href="http://www.dre.vanderbilt.edu/~schmidt/cs891s/2020-PDFs/3.4.3-atomic-operations-and-classes-pt3-implementing-java-atomiclong-atomicboolean.pdf" target="_blank" rel="noopener">http://www.dre.vanderbilt.edu/~schmidt/cs891s/2020-PDFs/3.4.3-atomic-operations-and-classes-pt3-implementing-java-atomiclong-atomicboolean.pdf</a></p>
<p><a href="https://readystory.tistory.com/53" target="_blank" rel="noopener">https://readystory.tistory.com/53</a></p>
<p><a href="https://docs.oracle.com/javase/tutorial/essential/concurrency/atomicvars.html" target="_blank" rel="noopener">https://docs.oracle.com/javase/tutorial/essential/concurrency/atomicvars.html</a></p>
<p><a href="https://junhyunny.github.io/information/java/java-atomic/" target="_blank" rel="noopener">https://junhyunny.github.io/information/java/java-atomic/</a></p>

                

                <hr>
                <!-- Pager -->
                <ul class="pager">
                    
                        <li class="previous">
                            <a href="/2022/11/13/Runnable-Callable/" data-toggle="tooltip" data-placement="top" title="Runnable-Callable">&larr; Previous Post</a>
                        </li>
                    
                    
                        <li class="next">
                            <a href="/2022/11/13/Thread-Pool/" data-toggle="tooltip" data-placement="top" title="Thread Pool">Next Post &rarr;</a>
                        </li>
                    
                </ul>

                <!-- duoshuo Share start -->
                
                <!-- 多说 Share end-->

                <!-- 多说评论框 start -->
                
                <!-- 多说评论框 end -->

                <!-- disqus comment start -->
                
                    <div class="comment">
                        <div id="disqus_thread" class="disqus-thread"></div>
                    </div>
                
                <!-- disqus comment end -->
            </div>
            
            <!-- Tabe of Content -->
            <!-- Table of Contents -->

    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">volatile</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">synchronized (Blocking, Critical Section)</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">Atomic (Non Blocking)</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">4.</span> <span class="toc-nav-text">CAS 알고리즘</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">5.</span> <span class="toc-nav-text">참조</span></a></li></ol>
        
        </div>
      </aside>
    

                
            <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                       
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
                <hr>
                <h5>FRIENDS</h5>
                <ul class="list-inline">

                    
                        <li><a href="https://bgpark.tistory.com" target="_blank">Byeonggil Park&#39;s Blog</a></li>
                    
                </ul>
                
            </div>
        </div>
    </div>
</article>




<!-- disqus embedded js code start (one page only need to embed once) -->
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = "your-disqus-ID";
    var disqus_identifier = "https://bgpark82.github.io/2022/11/13/Volatile-Synchronized-Atomic/";
    var disqus_url = "https://bgpark82.github.io/2022/11/13/Volatile-Synchronized-Atomic/";

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<!-- disqus embedded js code start end -->




<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'hover',
          placement: 'left',
          icon: 'ℬ'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                
                
                

                

                

                
                    <li>
                        <a target="_blank"  href="https://github.com/bgpark82">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank"  href="https://www.linkedin.com/in/byeonggilpark">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; bgpark 2022 
                    <br>
                    Theme by <a href="http://huangxuan.me">Hux</a> 
                    <span style="display: inline-block; margin: 0 5px;">
                        <i class="fa fa-heart"></i>
                    </span> 
                    re-Ported by <a href="http://beantech.org">BeanTech</a> | 
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="91px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=YenYuHsuan&repo=hexo-theme-beantech&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- 
     Because of the native support for backtick-style fenced code blocks 
     right within the Markdown is landed in Github Pages, 
     From V1.6, There is no need for Highlight.js, 
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0  
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/    
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("https://bgpark82.github.io/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->


<script>
    // dynamic User by Hux
    var _gaId = 'UA-XXXXXXXX-X';
    var _gaDomain = 'yoursite';

    // Originial
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', _gaId, _gaDomain);
    ga('send', 'pageview');
</script>




<!-- Baidu Tongji -->






	<a id="rocket" href="#top" class=""></a>
	<script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
    <script type="text/javascript" src="/js/toc.js?v=1.0.0" async=""></script>
<!-- Image to hack wechat -->
<img src="https://bgpark82.github.io/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
